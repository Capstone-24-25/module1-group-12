---
title: "Assignment Outline"
date: "2024-10-24"
output: html_document
---

1) What do you imagine is the reason for log-transforming the protein levels in biomarker-raw.csv? (Hint: look at the distribution of raw values for a sample of proteins.)

```{r, warning=FALSE}
library(ggplot2)
library(readr)
library(dplyr)
library(reshape2)

# Set seed for reproducibility
set.seed(123)

# Read in the data
biomarker_raw <- read_csv('~/GitHub/module1-group-12/data/biomarker-raw.csv')

# Subset all proteins in the data and convert to numeric values
proteins_numeric <- biomarker_raw %>% filter(Group %in% c("ASD", "TD")) %>%
  dplyr::select(contains("protein", ignore.case= TRUE)) %>% 
  mutate(across(everything(), as.numeric))

# Store all protein names into vector
sample_names <- names(proteins_numeric)

# Randomly sample 10 protein names and store into vetor
random_sample <- sample(sample_names, 10)

# Plot 10 histograms; one histogram per randomly sampled protein
for (protein_name in random_sample) {
  hist(proteins_numeric[[protein_name]], 
       main = paste("Histogram of", protein_name),
       xlab = protein_name,                       
       col = "lightblue",                           
       breaks = 20)                                 
  
}
```
```{r}
# Convert all proteins to log transformation
proteins_numeric_log <- proteins_numeric %>%
  mutate(across(everything(), ~ log(. + 1)))

# Plot 10 histograms; one histogram per randomly sampled protein, log transformed
for (protein_name in random_sample) {
  hist(proteins_numeric_log[[protein_name]], 
       main = paste("Histogram of", protein_name),
       xlab = protein_name,                       
       col = "lightblue",                           
       breaks = 20)                                 
}
```


2. Temporarily remove the outlier trimming from preprocessing and do some exploratory analysis of outlying values. Are there specific subjects (not values) that seem to be outliers? If so, are outliers more frequent in one group or the other? (Hint: consider tabluating the number of outlying values per subject.)

3) Experiment with the following modifications:

- repeat the analysis but carry out the entire selection procedure on a training partition -- in other words, set aside some testing data at the very beginning and don't use it until you are evaluating accuracy at the very end

- choose a larger number (more than ten) of top predictive proteins using each selection method

- use a fuzzy intersection instead of a hard intersection to combine the sets of top predictive proteins across selection methods

4) How are results affected by each modification?

4) Use any method to find either:

- a simpler panel that achieves comparable classification accuracy

- an alternative panel that achieves improved classification accuracy

Benchmark your results against the in-class analysis.

